!function(e){"use strict";e.fn.ntForm=function(t){var i={url:"",enctype:"multipart/form-data",ajax:!1,type:"post",dataType:"json",classname:"neco-form",lockButton:!1,submitButton:!0,cancelButton:!0,loading:{title:"Cargando...",image:"../loader.gif",classname:"neco-form-loading"},error:{classname:"neco-form-error",text:"Lo sentimos pero no se pudo procesar el formulario"},options:{},create:function(){},beforeSend:function(){},complete:function(){},success:function(){},submit:function(){}},s={},n={},r={init:function(t){return this.each(function(){s=e.extend({},i,t),n.element=e(this),a._create(),n.container=n.element.find("."+s.classname)})}},a={_create:function(){var t=0,i=n.element.find("[data-actions='necoform']"),r=i.length?i:n.element,o=Object.freeze({acceptButton:"<div class='action-button action-accept' style='margin-right: 0.875rem; display:inline-block;'><a>"+window.I18n.Common.accept+"</a></div>",cancelButton:"<div class='action-button action-cancel' style='margin-right: 0.875rem; display:inline-block;'><a>"+window.I18n.Common.cancel+"</a></div>",unlockButton:"<div id='slide-to-unlock'></div><div id='neco-unlock-slider-wrapper'><div id='neco-unlock-slider'><div class='ui-slider-handle'></div></div></div>"}),l=Object.freeze({alphaNumeric:/^\D+$/i,email:/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.(([0-9]{1,3})|([a-zA-Z]{2,4})|(aero|coop|info|museum|name))$/i,date:/^(0[1-9]|[12][0-9]|3[01])+[\-\/]+(0[1-9]|1[012])+[\-\/]+(19|20)[0-9]{2}/i,rif:/\b[JGVE]-[0-9]{8}-[0-9]{1}\b/i,numeric:/^\d+$/i,phone:/\(?(\d{4})\)? ?(\d{3})+\.(\d{2})+\.(\d{2})/i,password:/^.*(?=.{6,})(?=.*\d)(?=.*[a-zA-Z]).*$/i,notAllowed:/.["\\\/\{\}\[\]\+']/i}),c=e(o.acceptButton),h=e(o.cancelButton),u=function(t,i){var s;t=e(t),e("#tempError").remove(),s=e("<p>").attr("id","tempError").addClass("neco-submit-error").text(i),t.hasClass("neco-input-success")&&t.removeClass("neco-input-success"),t.addClass("neco-input-error"),t.after(s),t.focus()},d=function(e,t){return e=new RegExp(e),"required"===t.attr("required")?e.test(t.val()):!0};if(0===n.element.length&&(n.element=e("body"),e(n.element).find("form").each(function(){e(this).attr("id","neco-form-"+t).addClass("neco-form"),t+=1,e(n.element).find("input").each(function(){e(this).ntInput(e(this).attr("type"))}),e(n.element).find("select").each(function(){e(this).ntSelect()}),e(n.element).find("textarea").each(function(){e(this).ntTextArea()})})),n.element.length>0&&"FORM"!==e(n.element).get(0).tagName&&e(n.element).find("form")&&e(n.element).find("form").each(function(){e(this).attr("id","neco-form-"+t).addClass("neco-form"),t+=1,e(n.element).find("input").each(function(){e(this).ntInput(e(this).attr("type"))}),e(n.element).find("select").each(function(){e(this).ntSelect()}),e(n.element).find("textarea").each(function(){e(this).ntTextArea()})}),"FORM"===e(n.element).get(0).tagName&&(e(n.element).addClass("neco-form").attr({action:s.url,method:s.type,enctype:s.enctype,name:"neco-form-"+t}),e(n.element).find("input").each(function(){e(this).ntInput()})),e(n.element).find("label").each(function(){e(this).addClass("neco-label")}),setTimeout(function(){s.submitButton&&c.appendTo(r),s.cancelButton&&h.appendTo(r),e(h).on("click",function(t){e(n.element).find("input").each(function(){e(this).val("").removeClass("neco-input-error").removeClass("neco-input-success"),e("#tempError").remove()})})},3e3),s.lockButton){var f=e(document.createElement("div")).attr({id:"neco-unlock-form"}).html('<div id="slide-to-unlock"></div><div id="neco-unlock-slider-wrapper"><div id="neco-unlock-slider"><div class="ui-slider-handle"></div></div></div>').appendTo(n.element);e("#neco-unlock-slider").slider({animate:!0,slide:function(t,i){e("#slide-to-unlock").css("opacity",1-parseInt(e(i.handle).css("left"))/120)},stop:function(t,i){var s=Math.round(e(i.handle).position().left);s>200?e(f).fadeOut(function(t){e(f).remove(),e(c).fadeIn(),e(h).fadeIn()}):(e(i.handle).animate({left:0},200),e("#slide-to-unlock").animate({opacity:1},200))}})}else s.submitButton&&e(c).fadeIn(),s.cancelButton&&e(h).fadeIn();e(c).on("click",function(){var t,i,r=!1;e(n.element).find("input").each(function(s,n){var a=e(this);i=a.offset().top;var o=!!a.val(),c=a.attr("required"),h=a.attr("type");return"email"!==h||d(l.email,a)||(r=!0,u(a,window.I18n.Form.Warnings.email)),"fullname"!==h||d(l.alphaNumeric,a)||(r=!0,u(a,window.I18n.Form.Warnings.fullname)),"firstname"!==h||d(l.alphaNumeric,a)||(r=!0,u(a,window.I18n.Form.Warnings.firstname)),"lastname"!==h||d(l.alphaNumeric,a)||(r=!0,u(a,window.I18n.Form.Warnings.lastname)),"necoDate"!==h||d(l.date,a)||(r=!0,u(a,window.I18n.Form.Warnings.date)),o||!c||r||(r=!0,u(a,window.I18n.Form.Warnings.empty)),l.notAllowed.test(e(this).val())&&!r&&"password"!==h&&"hidden"!==h&&"date"!==h&&"necoDate"!==h&&(r=!0,u(a,window.I18n.Form.Warnings.notAllowed)),e(this).hasClass("neco-input-error")&&!r&&(r=!0,e("#tempError").remove(),t=e("<p>").attr("id","tempError").addClass("neco-submit-error").text(window.I18n.Form.Warnings.noErrors)),r?!1:void 0}),r?(e(this).before(t),e("html, body").animate({scrollTop:i},"slow")):(r=!1,s.ajax?e.ajax({type:s.type,dataType:s.dataType,data:e(n.element).serialize(),url:s.url,beforeSend:a._beforeSend(),complete:a._complete(),success:function(e){a._success(e)}}):e(n.element).submit())}),"function"==typeof s.create&&s.create()},_beforeSend:function(){"function"==typeof s.beforeSend&&s.beforeSend()},_complete:function(){"function"==typeof s.complete&&s.complete()},_success:function(e){"function"==typeof s.success&&s.success(e)},_submit:function(){"function"==typeof s.mouseleave&&s.mouseleave(this,n.li)}};return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" does not exist in ntForm plugin!'):r.init.apply(this,arguments)}}(jQuery),function(e){"use strict";e.fn.ntInput=function(t){var i={error:!1,message:!1,pattern:"",format:"",thousands:".",decimals:",",showQuick:!0,focus:function(){},blur:function(){},keydown:function(){},change:function(){},options:{},loading:{title:"Comprobando...",image:"../loader.gif",classname:"neco-input-loading"}},s=Object.freeze({alphaNumeric:/^\D+$/i,email:/^[^@]+@[^@\\.]+[\\.].+/i,date:/^(0[1-9]|[12][0-9]|3[01])+[\-\/]+(0[1-9]|1[012])+[\-\/]+(19|20)[0-9]{2}/i,rif:/\b[JGVE]-[0-9]{8}-[0-9]{1}\b/i,numeric:/^\d+$/i,phone:/\(?(\d{4})\)? ?(\d{3})+\.(\d{2})+\.(\d{2})/i,password:/^.*(?=.{6,})(?=.*\d)(?=.*[a-zA-Z]).*$/i,place:/^[^!<>;?=+@#"°{}_$%]+$/,plain:/^[^<>{}]+$/}),n={},r={},a={init:function(t){return this.each(function(){n=e.extend({},i,t),r.element=e(this),o._create(),o._focus(),o._blur(),o._keydown(),o._change()})},date:function(){},text:function(){}},o={_create:function(){if(r.type=e(r.element).attr("type"),"hidden"!==r.type){if(e(r.element).addClass("neco-input-"+r.type),e("*",r.element).change(o._change),e("*",r.element).keydown(o._keydown),"rif"===r.type&&(o.maskInput("a-99999999-9"," ",r.element),r.element.on("change",function(e){e.stopPropagation(),o.validateAndFeedInput(window.I18n.Form.Warnings.rif,s.rif,r)}),e(r.element).on("change",function(t){e(this).val(this.value.charAt(0).toUpperCase()+this.value.slice(1))})),"text"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.plain,s.plain,r)),o.actionOnEvent(r.element,"focusout",o.validateTextInputEmptiness(r))),"fullname"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.alphaNumeric,s.alphaNumeric,r)),o.actionOnEvent(r.element,"focusout",o.validateTextInputEmptiness(r))),"firstname"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.alphaNumeric,s.alphaNumeric,r)),o.actionOnEvent(r.element,"keypress blur",o.validateTextInputEmptiness(r))),"lastname"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.alphaNumeric,s.alphaNumeric,r)),o.actionOnEvent(r.element,"focusout",o.validateTextInputEmptiness(r))),"necoDate"===r.type&&(r.element.attr("type","necoDate"),e(r.element).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"dd/mm/yy"}),o.actionOnEvent(r.element,"change",o.validateAndFeedTextInput(window.I18n.Form.Warnings.date,s.date,r))),"email"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.email,s.email,r)),o.actionOnEvent(r.element,"focusout",o.validateTextInputEmptiness(r))),"money"===r.type&&(e(r.element).autoNumeric({aSep:n.thousands,aDec:n.decimals}),0===e(r.element).val().length&&e(r.element).val("0"+n.decimals+"00"),r.element.on("change",function(t){r.error=isNaN(e(r.element).val()),r.error?o.showSuccess():(e(r.element).parent().find(".neco-form-error").text(window.I18n.Form.Warnings["float"]),o.showError())})),"phone"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.phone,s.phone,r)),o.actionOnEvent(r.element,"focusout",o.validateTextInputEmptiness(r))),"password"===r.type&&(o.actionOnEvent(r.element,"keypress blur",o.validateAndFeedTextInput(window.I18n.Form.Warnings.password,s.password,r)),1===e(r.element).data("confirm"))){var t=e(document.createElement("div")).addClass("property").html('<label for="confirm">Confirmar Contraseña:</label><input type="password" name="confirm" id="confirm" value="" autocomplete="off" required="true" title="Vuelva a escribir la contrase&ntilde;a" /><span class="neco-tooltip">Por favor repita la contraseña</span></a><a class="neco-form-tip"><span class="neco-tooltip">Debe repetir la contraseña para confirmar que la haya escrito bien</span></a><a class="neco-form-error" title="No hay errores en el campo"><span class="neco-tooltip"></span></a>');e(r.element).parent("div").after(t),e(t).on("change",function(){var i=e(t).find("input");e(r.element).val()!==i.val()?(e(t).find(".neco-form-error").text(window.I18n.Form.Warnings.confirm),o.showErrorFeedback(i)):o.showSuccessFeedback(i)}),e(t).find(".neco-form-error").on("mouseover",function(){return 0===e(this).attr("title").length?!1:(e(this).find("span").text(e(this).attr("title")),void e(this).attr("title",""))})}n.showQuick&&o.quickError(),"function"==typeof n.create&&n.create()}},quickError:function(){var t=r.element,i=e("<span>").addClass("neco-form-error").attr("data-label",t.attr("data-label"));r.element.after(i)},actionOnEvent:function(e,t,i){var s;e.on(t,function(e){s&&window.clearTimeout(s),s=window.setTimeout(function(){i()},300)})},maskInput:function(t,i,s){void 0!==e.fn.mask&&e(s).mask(t,{placeholder:i})},validateAndFeedInput:function(t,i){i.error=o.checkPattern();var s=e(i.element),n=s.parent().find(".neco-form-error");i.error?(n.removeClass("active-feedback"),o.showSuccess()):(n.addClass("active-feedback").text(t),o.showError())},validateAndFeedTextInput:function(e,t,i){var s;return s=s||i.element,function(){var n=s.parent().find(".neco-form-error");i.error=o.matchInput(t,i.element),i.error||""===s.val()?""===s.val()?(n.removeClass("active-feedback"),o.validateTextInputEmptiness(i)()):(n.removeClass("active-feedback"),o.showSuccess()):(n.addClass("active-feedback").text(e),o.showError())}},validateTextInputEmptiness:function(e){var t=e.element,i=i||t.attr("required");return function(){""===t.val()&&i&&(t.attr("placeholder",window.I18n.Form.Warnings.empty),o.showError())}},isDateInputSupported:function(){var e=document.createElement("input");return e.setAttribute("type","date"),e.value="foo","date"===e.type&&"foo"!=e.value},showError:function(){e(r.element).hasClass("neco-input-success")&&e(r.element).removeClass("neco-input-success"),e(r.element).addClass("neco-input-error")},showSuccess:function(){e(r.element).hasClass("neco-input-error")&&e(r.element).removeClass("neco-input-error"),e(r.element).addClass("neco-input-success")},showErrorFeedback:function(t){e(t).hasClass("neco-input-success")&&e(t).removeClass("neco-input-success"),e(t).addClass("neco-input-error")},showSuccessFeedback:function(t){e(t).hasClass("neco-input-error")&&e(t).removeClass("neco-input-error"),e(t).addClass("neco-input-success")},matchInput:function(e,t){return e=new RegExp(e),e.test(t.val())},checkPattern:function(){var e=new RegExp(n.pattern);return e.test(r.element.val())},_focus:function(){},_blur:function(){},_keydown:function(){},_change:function(){},checkNoEmpty:function(){r.element.val()||(e(r.element).parent().find(".neco-form-error").attr({title:"No puedes dejar este campo en blanco"}),o.showError())}};return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(console.log(a),void e.error('Method "'+t+'" does not exist in ntInput plugin!')):a.init.apply(this,arguments)}}(jQuery),function(e){"use strict";e.fn.ntTextArea=function(t){var i={error:!1,message:!1,pattern:"",format:"",showQuick:!0,focus:function(){},blur:function(){},keydown:function(){},change:function(){},options:{},loading:{title:"Comprobando...",image:"../loader.gif",classname:"neco-input-loading"}},s={},n={},r={init:function(t){return this.each(function(){s=e.extend({},i,t),n.element=e(this),a._create(),a._focus(),a._blur(),a._keydown(),a._change()})}},a={_create:function(){e("*",n.element).change(a._change),e("*",n.element).keydown(a._keydown),"function"==typeof s.create&&s.create(),a.isRequired()},isRequired:function(){var t=e(n.element).attr("required");if(t){var i=e('<span class="neco-input-required">*</span>');n.element.closest(".form-entry").find("label").append(i)}s.required=t},quickHelp:function(){!s.help&&e(n.element).attr("title")?s.help=e(n.element).attr("title"):s.help||(s.help="No se pudo cargar el mensaje");var t=e(document.createElement("a")).attr({title:s.help}).text("").addClass("neco-form-help");e(n.element).after(t);var i=e(document.createElement("span")).addClass("neco-tooltip");e(t).append(i),e(t).on("mouseover",function(t){var s=e(this).attr("title");e(this).removeAttr("title"),e(i).text(s)})},quickTip:function(){!s.tip&&e(n.element).attr("quicktip")?s.tip=e(n.element).attr("quicktip"):s.tip||(s.tip="No se pudo cargar el mensaje");var t=e(document.createElement("a")).attr({title:s.tip}).text("").addClass("neco-form-tip");e(n.element).after(t);var i=e(document.createElement("span")).addClass("neco-tooltip");e(t).append(i),e(t).on("mouseover",function(t){var s=e(this).attr("title");e(this).removeAttr("title"),e(i).text(s)})},quickError:function(){s.error||(s.error="No hay errores en el campo");var t=e(document.createElement("a")).attr({title:s.error}).text("").addClass("neco-form-error");e(n.element).after(t);var i=e(document.createElement("span")).addClass("neco-tooltip");e(t).append(i),e(t).on("mouseover",function(t){var s=e(this).attr("title");e(this).removeAttr("title"),e(i).text(s)})},showError:function(){e(n.element).hasClass("neco-input-success")&&e(n.element).removeClass("neco-input-success"),e(n.element).addClass("neco-input-error")},showSuccess:function(){e(n.element).hasClass("neco-input-error")&&e(n.element).removeClass("neco-input-error"),e(n.element).addClass("neco-input-success")},checkPattern:function(){var e=new RegExp(s.pattern);return e.test(n.element.val())},_focus:function(){e(n.element).on("focus",function(e){"function"==typeof s.focus&&s.focus(this)})},_blur:function(){e(n.element).on("blur",function(e){"function"==typeof s.blur&&s.blur(this)})},_keydown:function(){e(n.element).on("change",function(e){"function"==typeof s.keydown&&s.keydown(this)})},_change:function(){e(n.element).on("change",function(e){s.required&&a.checkNoEmpty(),"function"==typeof s.change&&s.change(this)})},checkNoEmpty:function(){n.element.val()||(e(n.element).parent().find(".neco-form-error").attr({title:"No puedes dejar este campo en blanco"}),a.showError())}};return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" does not exist in ntTextArea plugin!'):r.init.apply(this,arguments)}}(jQuery),function(e){"use strict";e.fn.ntSelect=function(e){}}(jQuery),function(e){"use strict";function t(e){var t,i={};return void 0===e.selectionStart?(e.focus(),t=document.selection.createRange(),i.length=t.text.length,t.moveStart("character",-e.value.length),i.end=t.text.length,i.start=i.end-i.length):(i.start=e.selectionStart,i.end=e.selectionEnd,i.length=i.end-i.start),i}function i(e,t,i){if(void 0===e.selectionStart){e.focus();var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",t),s.select()}else e.selectionStart=t,e.selectionEnd=i}function s(t,i){e.each(i,function(s,n){if("function"==typeof n)i[s]=n(t,i,s);else if("string"==typeof n){var r=n.substr(0,4);if("fun:"===r){var a=e.autoNumeric[n.substr(4)];"function"==typeof a?i[s]=e.autoNumeric[n.substr(4)](t,i,s):i[s]=null}else"css:"===r&&(i[s]=e(n.substr(4)).val())}})}function n(e,t){"string"==typeof e[t]&&(e[t]*=1)}function r(t,i){var r=e.extend({},e.fn.autoNumeric.defaults,i);e.metadata&&(r=e.extend(r,t.metadata())),s(t,r);var a=r.vMax.toString().split("."),o=r.vMin||0===r.vMin?r.vMin.toString().split("."):[];n(r,"vMax"),n(r,"vMin"),n(r,"mDec"),r.aNeg=r.vMin<0?"-":"","number"!=typeof r.mDec&&(r.mDec=Math.max((a[1]?a[1]:"").length,(o[1]?o[1]:"").length)),null===r.altDec&&r.mDec>0&&("."===r.aDec&&","!==r.aSep?r.altDec=",":","===r.aDec&&"."!==r.aSep&&(r.altDec="."));var l=r.aNeg?"([-\\"+r.aNeg+"]?)":"(-?)";r._aNegReg=l,r._skipFirst=new RegExp(l+"[^-"+(r.aNeg?"\\"+r.aNeg:"")+"\\"+r.aDec+"\\d].*?(\\d|\\"+r.aDec+"\\d)"),r._skipLast=new RegExp("(\\d\\"+r.aDec+"?)[^\\"+r.aDec+"\\d]\\D*$");var c=(r.aNeg?r.aNeg:"-")+r.aNum+"\\"+r.aDec;return r.altDec&&r.altDec!==r.aSep&&(c+=r.altDec),r._allowed=new RegExp("[^"+c+"]","gi"),r._numReg=new RegExp(l+"(?:\\"+r.aDec+"?(\\d+\\"+r.aDec+"\\d+)|(\\d*(?:\\"+r.aDec+"\\d*)?))"),r}function a(e,t,i){if(t.aSign)for(;e.indexOf(t.aSign)>-1;)e=e.replace(t.aSign,"");e=e.replace(t._skipFirst,"$1$2"),e=e.replace(t._skipLast,"$1"),e=e.replace(t._allowed,""),t.altDec&&(e=e.replace(t.altDec,t.aDec));var s=e.match(t._numReg);if(e=s?[s[1],s[2],s[3]].join(""):"",i){var n="^"+t._aNegReg+"0*(\\d"+("leading"===i?")":"|$)");n=new RegExp(n),e=e.replace(n,"$1$2")}return e}function o(e,t,i){if(t&&i){var s=e.split(t);s[1]&&s[1].length>i&&(i>0?(s[1]=s[1].substring(0,i),e=s.join(t)):e=s[0])}return e}function l(e,t,i){return t&&"."!==t&&(e=e.replace(t,".")),i&&"-"!==i&&(e=e.replace(i,"-")),e.match(/\d/)||(e+="0"),e}function c(e,t,i){return i&&"-"!==i&&(e=e.replace("-",i)),t&&"."!==t&&(e=e.replace(".",t)),e}function h(e,t){e=a(e,t),e=o(e,t.aDec,t.mDec),e=l(e,t.aDec,t.aNeg);var i=+e;return i>=t.vMin&&i<=t.vMax}function u(e,t,i){return""===e||e===t.aNeg?"zero"===t.wEmpty?e+"0":"sign"===t.wEmpty||i?e+t.aSign:e:null}function d(e,t){e=a(e,t);var i=u(e,t,!0);if(null!==i)return i;var s="";s=2===t.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===t.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;var n=e.split(t.aDec);t.altDec&&1===n.length&&(n=e.split(t.altDec));var r=n[0];if(t.aSep)for(;s.test(r);)r=r.replace(s,"$1"+t.aSep+"$2");if(0!==t.mDec&&n.length>1?(n[1].length>t.mDec&&(n[1]=n[1].substring(0,t.mDec)),e=r+t.aDec+n[1]):e=r,t.aSign){var o=-1!==e.indexOf(t.aNeg);e=e.replace(t.aNeg,""),e="p"===t.pSign?t.aSign+e:e+t.aSign,o&&(e=t.aNeg+e)}return e}function f(e,t,i,s){e=""===e?"0":e.toString();var n="",r=0,a="",o="boolean"==typeof s||null===s?s?t:0:+s,l=function(e){var t=0===o?/(\.[1-9]*)0*$/:1===o?/(\.\d[1-9]*)0*$/:new RegExp("(\\.\\d{"+o+"}[1-9]*)0*$");return e=e.replace(t,"$1"),0===o&&(e=e.replace(/\.$/,"")),e};"-"===e.charAt(0)&&(a="-",e=e.replace("-","")),e.match(/^\d/)||(e="0"+e),"-"===a&&0===+e&&(a=""),+e>0&&(e=e.replace(/^0*(\d)/,"$1"));var c=e.lastIndexOf("."),h=-1===c?e.length-1:c,u=e.length-1-h;if(t>=u){if(n=e,o>u)for(-1===c&&(n+=".");o>u;){var d="000000".substring(0,o-u);n+=d,u+=d.length}else u>o?n=l(n):0===u&&0===o&&(n=n.replace(/\.$/,""));return a+n}var f=c+t,p=+e.charAt(f+1),_=e.substring(0,f+1).split(""),m="."===e.charAt(f)?e.charAt(f-1)%2:e.charAt(f)%2;if(p>4&&"S"===i||p>4&&"A"===i&&""===a||p>5&&"A"===i&&"-"===a||p>5&&"s"===i||p>5&&"a"===i&&""===a||p>4&&"a"===i&&"-"===a||p>5&&"B"===i||5===p&&"B"===i&&1===m||p>0&&"C"===i&&""===a||p>0&&"F"===i&&"-"===a||p>0&&"U"===i)for(r=_.length-1;r>=0;r-=1)if("."!==_[r]){if(_[r]=+_[r]+1,_[r]<10)break;r>0&&(_[r]="0")}return _=_.slice(0,f+1),n=l(_.join("")),a+n}function p(t,i){this.options=i,this.that=t,this.$that=e(t),this.formatted=!1,this.io=r(this.$that,this.options),this.value=t.value}function _(e){var t=e.data("autoNumeric");return t||(t={},e.data("autoNumeric",t)),t}function m(e,t){var i=_(e),s=i.holder;return void 0===s&&t&&(s=new p(e.get(0),t),i.holder=s),s}function g(e){var t=e.data("autoNumeric");return t&&t.holder?t.holder.options:{}}function v(t){t=t||{};var i=e(this),s=m(i,t);s.io.aForm&&(this.value||"empty"!==s.io.wEmpty)&&i.autoNumericSet(i.autoNumericGet(t),t)}function y(t){var i=e(t.target),s=m(i);return s.init(t),s.skipAllways(t)?(s.processed=!0,!0):s.processAllways()?(s.processed=!0,s.formatQuick(),t.preventDefault(),!1):(s.formatted=!1,!0)}function w(t){var i=e(t.target),s=m(i),n=s.processed;return s.init(t),s.skipAllways(t)?!0:n?(t.preventDefault(),!1):s.processAllways()||s.processKeypress()?(s.formatQuick(),t.preventDefault(),!1):void(s.formatted=!1)}function b(t){var i=e(t.target),s=m(i);s.init(t);var n=s.skipAllways(t);return s.kdCode=0,delete s.valuePartsBeforePaste,n?!0:""===this.value?!0:void(s.formatted||s.formatQuick())}function k(t){var i=e(t.target),s=m(i);s.inVal=i.val();var n=u(s.inVal,s.io,!0);null!==n&&i.val(n)}function x(t){var i=e(t.target),s=m(i),n=s.io,r=i.val(),o=r;""!==r&&(r=a(r,n),null===u(r,n)&&h(r,n)?(r=l(r,n.aDec,n.aNeg),r=f(r,n.mDec,n.mRound,n.aPad),r=c(r,n.aDec,n.aNeg)):r="");var p=u(r,n,!1);null===p&&(p=d(r,n)),p!==o&&i.val(p),p!==s.inVal&&(i.change(),delete s.inVal)}function C(t){return"string"==typeof t&&(t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),t="#"+t.replace(/(:|\.)/g,"\\$1")),e(t)}p.prototype={init:function(e){this.value=this.that.value,this.io=r(this.$that,this.options),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=t(this.that),("keydown"===e.type||"keyup"===e.type)&&(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1},setSelection:function(e,t,s){e=Math.max(e,0),t=Math.min(t,this.that.value.length),this.selection={start:e,end:t,length:t-e},(void 0===s||s)&&i(this.that,e,t)},setPosition:function(e,t){this.setSelection(e,e,t)},getBeforeAfter:function(){var e=this.value,t=e.substring(0,this.selection.start),i=e.substring(this.selection.end,e.length);return[t,i]},getBeforeAfterStriped:function(){var e=this.getBeforeAfter();return e[0]=a(e[0],this.io),e[1]=a(e[1],this.io),e},normalizeParts:function(e,t){var i=this.io;t=a(t,i);var s=t.match(/^\d/)?!0:"leading";e=a(e,i,s),(""===e||e===i.aNeg)&&t>""&&(t=t.replace(/^0*(\d)/,"$1"));var n=e+t;if(i.aDec){var r=n.match(new RegExp("^"+i._aNegReg+"\\"+i.aDec));r&&(e=e.replace(r[1],r[1]+"0"),n=e+t)}return"zero"!==i.wEmpty||n!==i.aNeg&&""!==n||(e+="0"),[e,t]},setValueParts:function(e,t){var i=this.io,s=this.normalizeParts(e,t),n=s.join(""),r=s[0].length;return h(n,i)?(n=o(n,i.aDec,i.mDec),r>n.length&&(r=n.length),this.value=n,this.setPosition(r,!1),!0):!1},signPosition:function(){var e=this.io,t=e.aSign,i=this.that;if(t){var s=t.length;if("p"===e.pSign){var n=e.aNeg&&i.value&&i.value.charAt(0)===e.aNeg;return n?[1,s+1]:[0,s]}var r=i.value.length;return[r-s,r]}return[1e3,-1]},expandSelectionOnSign:function(e){var t=this.signPosition(),i=this.selection;i.start<t[1]&&i.end>t[0]&&((i.start<t[0]||i.end>t[1])&&this.value.substring(Math.max(i.start,t[0]),Math.min(i.end,t[1])).match(/^\s*$/)?i.start<t[0]?this.setSelection(i.start,t[0],e):this.setSelection(t[1],i.end,e):this.setSelection(Math.min(i.start,t[0]),Math.max(i.end,t[1]),e))},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var e=this.getBeforeAfter(),t=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,e[0]=e[0].substr(0,t[0].length)+a(e[0].substr(t[0].length),this.io),this.setValueParts(e[0],e[1])||(this.value=t.join(""),this.setPosition(t[0].length,!1))}},skipAllways:function(e){var t=this.kdCode,i=this.which,s=this.ctrlKey,n=this.cmdKey;if(17===t&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste)return this.checkPaste(),!1;if(t>=112&&123>=t||t>=91&&93>=t||t>=9&&31>=t||8>t&&(0===i||i===t)||144===t||145===t||45===t)return!0;if((s||n)&&65===t)return!0;if((s||n)&&(67===t||86===t||88===t))return"keydown"===e.type&&this.expandSelectionOnSign(),86===t&&("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===t;if(s||n)return!0;if(37===t||39===t){var r=this.io.aSep,a=this.selection.start,o=this.that.value;return"keydown"===e.type&&r&&!this.shiftKey&&(37===t&&o.charAt(a-2)===r?this.setPosition(a-1):39===t&&o.charAt(a)===r&&this.setPosition(a+1)),!0}return t>=34&&40>=t?!0:!1},processAllways:function(){var e;return 8===this.kdCode||46===this.kdCode?(this.selection.length?(this.expandSelectionOnSign(!1),e=this.getBeforeAfterStriped(),this.setValueParts(e[0],e[1])):(e=this.getBeforeAfterStriped(),8===this.kdCode?e[0]=e[0].substring(0,e[0].length-1):e[1]=e[1].substring(1,e[1].length),this.setValueParts(e[0],e[1])),!0):!1},processKeypress:function(){var e=this.io,t=String.fromCharCode(this.which),i=this.getBeforeAfterStriped(),s=i[0],n=i[1];return t===e.aDec||e.altDec&&t===e.altDec||("."===t||","===t)&&110===this.kdCode?e.mDec&&e.aDec?e.aNeg&&n.indexOf(e.aNeg)>-1?!0:s.indexOf(e.aDec)>-1?!0:n.indexOf(e.aDec)>0?!0:(0===n.indexOf(e.aDec)&&(n=n.substr(1)),this.setValueParts(s+e.aDec,n),!0):!0:"-"===t||"+"===t?e.aNeg?(""===s&&n.indexOf(e.aNeg)>-1&&(s=e.aNeg,n=n.substring(1,n.length)),s=s.charAt(0)===e.aNeg?s.substring(1,s.length):"-"===t?e.aNeg+s:s,this.setValueParts(s,n),!0):!0:t>="0"&&"9">=t?(e.aNeg&&""===s&&n.indexOf(e.aNeg)>-1&&(s=e.aNeg,n=n.substring(1,n.length)),this.setValueParts(s+t,n),!0):!0},formatQuick:function(){var e=this.io,t=this.getBeforeAfterStriped(),i=d(this.value,this.io),s=i.length;if(i){var n,r=t[0].split("");for(n=0;n<r.length;n+=1)r[n].match("\\d")||(r[n]="\\"+r[n]);var a=new RegExp("^.*?"+r.join(".*?")),o=i.match(a);o?(s=o[0].length,(0===s&&i.charAt(0)!==e.aNeg||1===s&&i.charAt(0)===e.aNeg)&&e.aSign&&"p"===e.pSign&&(s=this.io.aSign.length+("-"===i.charAt(0)?1:0))):e.aSign&&"s"===e.pSign&&(s-=e.aSign.length)}this.that.value=i,this.setPosition(s),this.formatted=!0}},e.fn.autoNumeric=function(e){return this.each(function(){v.call(this,e)}).unbind(".autoNumeric").bind({"keydown.autoNumeric":y,"keypress.autoNumeric":w,"keyup.autoNumeric":b,"focusin.autoNumeric":k,"focusout.autoNumeric":x})},e.autoNumeric={},e.autoNumeric.Strip=function(t){var i=C(t),s=g(i);arguments[1]&&"object"==typeof arguments[1]&&(s=e.extend({},s,arguments[1]));var n=r(i,s),o=C(t).val();return o=a(o,n),o=l(o,n.aDec,n.aNeg),0===+o&&(o="0"),o},e.autoNumeric.Format=function(t,i){var s=C(t),n=g(s);arguments[2]&&"object"==typeof arguments[2]&&(n=e.extend({},n,arguments[2])),i.toString();var a=r(s,n);return i=f(i,a.mDec,a.mRound,a.aPad),i=c(i,a.aDec,a.aNeg),h(i,a)||(i=f("",a.mDec,a.mRound,a.aPad)),d(i,a)},e.fn.autoNumericGet=function(){return arguments[0]?e.autoNumeric.Strip(this,arguments[0]):e.autoNumeric.Strip(this)},e.fn.autoNumericSet=function(t){return arguments[1]?this.val(e.autoNumeric.Format(this,t,arguments[1])):this.val(e.fn.autoNumeric.Format(this,t))},e.autoNumeric.defaults={aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!0,wEmpty:"empty",aForm:!1},e.fn.autoNumeric.defaults=e.autoNumeric.defaults,e.fn.autoNumeric.Strip=e.autoNumeric.Strip,e.fn.autoNumeric.Format=e.autoNumeric.Format}(jQuery),function(){"use strict";var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,s,n,r,a;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),r=e.childNodes,a=[],s=0,n=r.length;n>s;s++)i=r[s],a.push(this.add_option(i,t,e.disabled));return a},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var i,s,n,r,a;for(s=new e,a=t.childNodes,n=0,r=a.length;r>n;n++)i=a[n],s.add_node(i);return s.parsed},this.SelectParser=e}.call(this),function(){var e,t;t=this,e=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},e.prototype.result_add_option=function(e){var t,i;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=""!==e.style.cssText?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+i+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show();
},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,i;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*e.length),t=e.substring(i,i+1)},e.prototype.container_width=function(){var e;return null!=this.options.width?this.options.width:(e=null!=window.getComputedStyle?parseFloat(window.getComputedStyle(this.form_field).getPropertyValue("width")):"undefined"!=typeof jQuery&&null!==jQuery&&null!=this.form_field_jq?this.form_field_jq.outerWidth():this.form_field.getWidth(),e+"px")},e.browser_is_supported=function(){var e;return"Microsoft Internet Explorer"===window.navigator.appName?null!==(e=document.documentMode)&&e>=8:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),t.AbstractChosen=e}.call(this),function(){var e,t,i,s={}.hasOwnProperty,n=function(e,t){function i(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};i=this,e=jQuery,e.fn.extend({chosen:function(i){return AbstractChosen.browser_is_supported()?this.each(function(s){var n;return n=e(this),n.hasClass("chzn-done")?void 0:n.data("chosen",new t(this,i))}):this}}),t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return n(s,t),s.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},s.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},s.prototype.set_up_html=function(){var t,i;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",t=["chzn-container"],t.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chzn-rtl"),i={id:this.container_id,"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.container=e("<div />",i),this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop"><ul class="chzn-results"></ul></div>'):this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chzn-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},s.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){e.container_mousedown(t)}),this.container.mouseup(function(t){e.container_mouseup(t)}),this.container.mouseenter(function(t){e.mouse_enter(t)}),this.container.mouseleave(function(t){e.mouse_leave(t)}),this.search_results.mouseup(function(t){e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel DOMMouseScroll",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("liszt:updated",function(t){e.results_update_field(t)}),this.form_field_jq.bind("liszt:activate",function(t){e.activate_field(t)}),this.form_field_jq.bind("liszt:open",function(t){e.container_mousedown(t)}),this.search_field.blur(function(t){e.input_blur(t)}),this.search_field.keyup(function(t){e.keyup_checker(t)}),this.search_field.keydown(function(t){e.keydown_checker(t)}),this.search_field.focus(function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.click(function(t){e.choices_click(t)}):this.container.click(function(e){e.preventDefault()})},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},s.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chzn-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field())},s.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},s.prototype.search_results_mousewheel=function(e){var t,i,s;return t=-(null!=(i=e.originalEvent)?i.wheelDelta:void 0)||(null!=(s=e.originialEvent)?s.detail:void 0),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(e){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){var e,t,s,n,r;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",r=this.results_data,s=0,n=r.length;n>s;s++)t=r[s],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},s.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},s.prototype.result_do_highlight=function(e){var t,i,s,n,r;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),s=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),n=s+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=n)return this.search_results.scrollTop(t-s>0?t-s:0);if(r>i)return this.search_results.scrollTop(i)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){if(null!=this.result_single_selected)this.result_do_highlight(this.result_single_selected);else if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return this.container.addClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},s.prototype.results_hide=function(){return this.result_clear_highlight(),this.container.removeClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.results_showing=!1},s.prototype.set_tab_index=function(e){var t;return this.form_field_jq.attr("tabindex")?(t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)):void 0},s.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for="+this.form_field.id+"]")),this.form_field_label.length>0?this.form_field_label.click(function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},s.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(t){var i,s,n,r=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+t.array_index,this.choices+=1,s=t.disabled?'<li class="search-choice search-choice-disabled" id="'+i+'"><span>'+t.html+"</span></li>":'<li class="search-choice" id="'+i+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>',this.search_container.before(s),n=e("#"+i).find("a").first(),n.click(function(e){return r.choice_destroy_link_click(e)}))},s.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},s.prototype.choice_destroy=function(e){return this.result_deselect(e.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(e){var t,i,s,n;return this.result_highlight?(t=this.result_highlight,i=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),n=i.substr(i.lastIndexOf("_")+1),s=this.results_data[n],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.is_multiple?this.choice_build(s):(this.selected_item.find("span").first().text(s.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()):void 0},s.prototype.result_activate=function(e){return e.addClass("active-result")},s.prototype.result_deactivate=function(e){return e.removeClass("active-result")},s.prototype.result_deselect=function(t){var i,s;return s=this.results_data[t],this.form_field.options[s.options_index].disabled?!1:(s.selected=!1,this.form_field.options[s.options_index].selected=!1,i=e("#"+this.container_id+"_o_"+t),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[s.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},s.prototype.winnow_results=function(){var t,i,s,n,r,a,o,l,c,h,u,d,f,p,_,m,g,v;for(this.no_results_clear(),c=0,h=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),a=this.search_contains?"":"^",r=new RegExp(a+h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),f=new RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),v=this.results_data,p=0,m=v.length;m>p;p++)if(i=v[p],!i.disabled&&!i.empty)if(i.group)e("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(t=!1,l=i.dom_id,o=e("#"+l),r.test(i.html))t=!0,c+=1;else if(this.enable_split_word_search&&(i.html.indexOf(" ")>=0||0===i.html.indexOf("["))&&(n=i.html.replace(/\[|\]/g,"").split(" "),n.length))for(_=0,g=n.length;g>_;_++)s=n[_],r.test(s)&&(t=!0,c+=1);t?(h.length?(u=i.html.search(f),d=i.html.substr(0,u+h.length)+"</em>"+i.html.substr(u+h.length),d=d.substr(0,u)+"<em>"+d.substr(u)):d=i.html,o.html(d),this.result_activate(o),null!=i.group_array_index&&e("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(o))}return 1>c&&h.length?this.no_results(h):this.winnow_results_set_highlight()},s.prototype.winnow_results_clear=function(){var t,i,s,n,r;for(this.search_field.val(""),i=this.search_results.find("li"),r=[],s=0,n=i.length;n>s;s++)t=i[s],t=e(t),t.hasClass("group-result")?r.push(t.css("display","auto")):this.is_multiple&&t.hasClass("result-selected")?r.push(void 0):r.push(this.result_activate(t));return r},s.prototype.winnow_results_set_highlight=function(){var e,t;return this.result_highlight||(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null==e)?void 0:this.result_do_highlight(e)},s.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i)},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},s.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},s.prototype.search_field_scale=function(){var t,i,s,n,r,a,o,l;if(this.is_multiple){for(i=0,a=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],o=0,l=r.length;l>o;o++)s=r[o],n+=s+":"+this.search_field.css(s)+";";return t=e("<div />",{style:n}),t.text(this.search_field.val()),e("body").append(t),a=t.width()+25,t.remove(),this.f_width||(this.f_width=this.container.outerWidth()),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"})}},s.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},s}(AbstractChosen),i.Chosen=t}.call(this);